(this["webpackJsonpreact-gallery"]=this["webpackJsonpreact-gallery"]||[]).push([[0],{16:function(e,t,a){e.exports={gallery:"layout_gallery__3womD",item:"layout_item__2R4Y3",appear:"layout_appear__2iSgk"}},20:function(e,t,a){e.exports={item:"album_item__HqEl5",thumbnail:"album_thumbnail__f6ICF",meta:"album_meta__3zpkn",name:"album_name__3czYe",label:"album_label__2Ju1L"}},24:function(e,t,a){e.exports={h1:"typography_h1__kQ9fz",a:"typography_a__8hNGT"}},37:function(e,t,a){e.exports={item:"image_item__326qo"}},38:function(e,t,a){e.exports={loader:"loader_loader__1cg14",loading:"loader_loading__1KCrl"}},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(1),r=a.n(c),s=a(25),u=a.n(s),o=a(7),i=a(19),l=a(23),m=a(40),b=a(15),p=a.n(b),j=a(14),d=a(17),g={items:[],currentAlbumImages:[],currentImage:{},isLoading:!1,popapIsOpenned:!1},f=Object(l.b)({name:"albums",initialState:g,reducers:{reset:function(e){return g},getAlbums:function(e){e.isLoading=!0},getAlbumsSuccess:function(e,t){e.isLoading=!1,e.items=Object(i.a)(t.payload)},getAlbumsFailure:function(e){e.isLoading=!1},getAlbumMeta:function(e){e.isLoading=!0},getAlbumMetaSuccess:function(e,t){e.isLoading=!1,e.items=e.items.map((function(e){return e.id===t.payload.albumId?Object(d.a)(Object(d.a)({},e),{},{imagesNumber:t.payload.imagesNumber,thumbnailUrl:t.payload.thumbnailUrl}):e}))},getAlbumMetaFailure:function(e){e.isLoading=!1},setCurrentAlbumId:function(e,t){e.currentAlbumId=t.payload},getAlbumImages:function(e){e.isLoading=!0},getAlbumImagesSuccess:function(e,t){e.isLoading=!1,e.currentAlbumImages=Object(i.a)(t.payload)},getAlbumImagesFailure:function(e){e.isLoading=!1},getImages:function(e){e.isLoading=!0},getImagesSuccess:function(e,t){e.isLoading=!1,e.items=Object(i.a)(t.payload)},getImagesFailure:function(e){e.isLoading=!1},setCurrentImage:function(e,t){e.currentImage=e.currentAlbumImages.find((function(e){return e.id===t.payload}))},openPopup:function(e){e.popapIsOpenned=!0},closePopup:function(e){e.popapIsOpenned=!1}}}),_=f.actions,O=_.reset,x=_.getAlbums,h=_.getAlbumsSuccess,v=_.getAlbumsFailure,y=_.getAlbumMeta,I=_.getAlbumMetaSuccess,N=_.getAlbumMetaFailure,A=_.getAlbumImages,w=_.getAlbumImagesSuccess,k=_.getAlbumImagesFailure,C=_.setCurrentAlbumId,L=_.setCurrentImage,S=_.openPopup,F=_.closePopup,P=f.reducer,M=p.a.mark(E),U=p.a.mark(J),q=p.a.mark(B),z=p.a.mark(R);function E(){var e,t;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("https://jsonplaceholder.typicode.com/albums");case 3:return e=a.sent,a.next=6,e.json();case 6:return t=a.sent,a.next=9,Object(j.a)({type:h.type,payload:t});case 9:a.next=16;break;case 11:return a.prev=11,a.t0=a.catch(0),console.error(a.t0),a.next=16,Object(j.a)({type:v.type});case 16:case"end":return a.stop()}}),M,null,[[0,11]])}function J(e){var t,a,n;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("https://jsonplaceholder.typicode.com/albums/".concat(e.payload,"/photos?_start=0&_limit=1"));case 3:return t=c.sent,a=t.headers.get("x-total-count"),c.next=7,t.json();case 7:return n=c.sent,c.next=10,Object(j.a)({type:I.type,payload:{thumbnailUrl:n[0].url,imagesNumber:a,albumId:n[0].albumId}});case 10:c.next=17;break;case 12:return c.prev=12,c.t0=c.catch(0),console.error(c.t0),c.next=17,Object(j.a)({type:N.type});case 17:case"end":return c.stop()}}),U,null,[[0,12]])}function B(e){var t,a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://jsonplaceholder.typicode.com/albums/".concat(e.payload,"/photos"));case 3:return t=n.sent,n.next=6,t.json();case 6:return a=n.sent,n.next=9,Object(j.a)({type:w.type,payload:a});case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(0),console.error(n.t0),n.next=16,Object(j.a)({type:k.type});case 16:case"end":return n.stop()}}),q,null,[[0,11]])}function R(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)(x.type,E);case 2:return e.next=4,Object(j.b)(A.type,B);case 4:return e.next=6,Object(j.b)(y.type,J);case 6:case"end":return e.stop()}}),z)}var Y=R,H=Object(m.a)(),K=Object(l.a)({reducer:{albums:P},middleware:[].concat(Object(i.a)(Object(l.c)()),[H])});H.run(Y);var D=K,G=a(29),Q=a(6),T=a(20),V=a.n(T),W=a(16),X=a.n(W);var Z=function(e){var t=Object(o.b)(),a=Object(Q.f)();return Object(c.useEffect)((function(){t(y(e.id))}),[]),Object(n.jsxs)("div",{className:"".concat(X.a.item," ").concat(V.a.item),onClick:function(){a.push("/album/".concat(e.title)),t(C(e.id))},children:[e.thumbnailUrl&&Object(n.jsx)("img",{className:V.a.thumbnail,src:e.thumbnailUrl,alt:e.title}),Object(n.jsxs)("div",{className:V.a.meta,children:[Object(n.jsx)("span",{className:V.a.name,children:e.title}),e.imagesNumber&&Object(n.jsxs)("span",{className:V.a.label,children:[e.imagesNumber," images"]})]})]})};var $=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.albums}));return Object(c.useEffect)((function(){e(O()),e(x())}),[]),Object(n.jsx)("div",{className:X.a.gallery,children:t.items.map((function(e){return Object(n.jsx)(Z,Object(d.a)({},e),e.id)}))})},ee=a(37),te=a.n(ee);var ae=function(e){var t=Object(o.b)();return Object(n.jsx)("div",{className:X.a.item,onClick:function(){t(S()),t(L(e.id))},children:Object(n.jsx)("img",{className:te.a.item,src:e.url,alt:e.title})})},ne=a(39),ce=a(8),re=a.n(ce);var se=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.albums.currentAlbumImages})),r=Object(o.c)((function(e){return e.albums.currentImage})),s=Object(c.useState)(0),u=Object(ne.a)(s,2),i=u[0],l=u[1];return Object(n.jsx)("div",{className:re.a.popup,children:Object(n.jsxs)("div",{className:re.a.content,children:[Object(n.jsxs)("div",{className:re.a.viewport,children:[Object(n.jsx)("img",{className:re.a.image,src:r.url,alt:e.alt}),Object(n.jsx)("button",{className:"".concat(re.a.navigation," ").concat(re.a.navigationPrev),onClick:function(){var e=a.findIndex((function(e){return e.id===r.id}));e>0&&t(L(a[e-1].id))}}),Object(n.jsx)("button",{className:"".concat(re.a.navigation," ").concat(re.a.navigationNext),onClick:function(){var e=a.findIndex((function(e){return e.id===r.id}));e<=a.length-2&&t(L(a[e].id+1))}})]}),Object(n.jsx)("button",{className:re.a.close,onClick:function(){t(F())}}),Object(n.jsxs)("div",{className:re.a.carousel,children:[i>0&&Object(n.jsx)("button",{className:"".concat(re.a.arrow," ").concat(re.a.arrowLeft),onClick:function(){i>0&&l(i-1)}}),i<a.length-1&&Object(n.jsx)("button",{className:"".concat(re.a.arrow," ").concat(re.a.arrowRight),onClick:function(){i<a.length&&l(i+1)}}),Object(n.jsx)("div",{className:re.a.carouselContent,style:{left:9*-i+"rem"},children:a&&a.map((function(e){return Object(n.jsx)("img",{className:re.a.carouselItem,src:e.thumbnailUrl,alt:e.title,onClick:(a=e.id,function(){t(L(a))})},e.id);var a}))})]})]})})};var ue=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.albums.currentAlbumId})),a=Object(o.c)((function(e){return e.albums.currentAlbumImages})),r=Object(o.c)((function(e){return e.albums.popapIsOpenned}));return Object(c.useEffect)((function(){e(A(t))}),[]),Object(n.jsxs)("div",{className:X.a.gallery,children:[r&&Object(n.jsx)(se,{}),a&&a.map((function(e){return Object(n.jsx)(ae,Object(d.a)({},e),e.id)}))]})},oe=a(38),ie=a.n(oe);var le=function(){return Object(n.jsx)("div",{className:ie.a.loader})},me=a(24),be=a.n(me);var pe=function(){var e=Object(o.c)((function(e){return e.albums.isLoading}));return Object(n.jsx)(G.a,{basename:"/react-gallery",children:Object(n.jsxs)(Q.c,{children:[Object(n.jsxs)(Q.a,{exact:!0,path:"/",children:[Object(n.jsx)("h1",{className:be.a.h1,children:"Albums"}),e&&Object(n.jsx)(le,{}),Object(n.jsx)($,{})]}),Object(n.jsxs)(Q.a,{path:"/album",children:[Object(n.jsx)("h1",{className:be.a.h1,children:Object(n.jsx)(G.b,{className:"".concat(be.a.h1," ").concat(be.a.a),to:"/",children:"Back to albums"})}),e&&Object(n.jsx)(le,{}),Object(n.jsx)(ue,{})]})]})})};a(52);u.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(o.a,{store:D,children:Object(n.jsx)(pe,{})})}),document.getElementById("root"))},8:function(e,t,a){e.exports={popup:"popup_popup__2YH9o",content:"popup_content__3VHBz",close:"popup_close__3KaXq",navigation:"popup_navigation__3Wnr6",navigationPrev:"popup_navigationPrev__q9f0D",navigationNext:"popup_navigationNext__2a18i",viewport:"popup_viewport__zkdCj",image:"popup_image__2uNB1",carousel:"popup_carousel__9ZFPa",arrow:"popup_arrow__3CqmY",carouselContent:"popup_carouselContent__3uJKs",carouselItem:"popup_carouselItem__2qF0f",arrowLeft:"popup_arrowLeft__1G9Un",arrowRight:"popup_arrowRight__1J-7z"}}},[[53,1,2]]]);
//# sourceMappingURL=main.689c7c66.chunk.js.map